<odoo>
    <data>
        <record id="action_report_referencia_produccion" model="ir.actions.report">
            <field name="name">Referencia de produccion</field>
            <field name="model">mrp.master.order</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">alterben_mrp_master_order.report_referencia_produccion</field>
            <field name="print_report_name">'Referencia produccion - ' + (doc.name or '')</field>
        </record>

        <template id="report_referencia_produccion">
            <t t-call="web.basic_layout">
                <div class="page" style="margin-top:0; padding-top:0;">
                    <div style="text-align:center; font-weight:bold; font-size:16px;">
                        Respaldo Referencial de produccion
                    </div>
                    <table style="width:100%; font-size:12px; margin-top:6px;">
                        <tr>
                            <td style="width:33%;"><span t-esc="report_date_str"/></td>
                            <td style="width:34%; text-align:center;">L/P <span t-esc="master and (master.name or '') or ''"/></td>
                            <td style="width:33%; text-align:right;"><span t-esc="process_employee_name"/></td>
                        </tr>
                    </table>

                    <style type="text/css">
                        .ref-prod-table {
                            width: 100%;
                            border-collapse: collapse;
                            font-size: 13px;
                            font-family: "Arial Narrow", "Liberation Sans Narrow", "Nimbus Sans Narrow", Arial, sans-serif;
                            font-stretch: condensed;
                        }
                        .ref-prod-table th,
                        .ref-prod-table td {
                            border: 1px solid #000;
                            padding: 3px 4px;
                            line-height: 1.2;
                            vertical-align: middle;
                        }
                        .ref-prod-total td {
                            font-weight: bold;
                            background: #f2f2f2;
                        }
                    </style>
                    <table class="ref-prod-table" style="margin-top:8px;">
                        <thead>
                            <tr>
                                <th style="width:4%;">#</th>
                                <th style="width:9%;">CODIGO</th>
                                <th style="width:51%;">DESCRIPCION</th>
                                <th style="width:10%; text-align:center;">CANT.</th>
                                <th style="width:10%; text-align:center;">CANT. REAL</th>
                                <th style="width:10%; text-align:center;">LIBERACION</th>
                                <th style="width:10%;">OBSERVACIONES</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-set="_i" t-value="0"/>
                            <tr t-foreach="main_rows" t-as="l">
                                <t t-set="_i" t-value="_i + 1"/>
                                <td>
                                    <t t-esc="_i"/>
                                </td>
                                <td>
                                    <t t-if="l">
                                        <t t-esc="l.product_code or (l.product_id.default_code or '')"/>
                                    </t>
                                </td>
                                <td>
                                    <t t-if="l">
                                        <t t-esc="l.product_id.display_name"/>
                                    </t>
                                </td>
                                <td style="text-align:center;">
                                    <t t-if="l">
                                        <t t-esc="'%.2f' % (l.product_qty or 0.0)"/>
                                    </t>
                                </td>
                                <td style="text-align:center;">&#160;</td>
                                <td style="text-align:center;">&#160;</td>
                                <td>&#160;</td>
                            </tr>
                            <tr class="ref-prod-total">
                                <td colspan="3" style="text-align:right;">TOTAL</td>
                                <td style="text-align:center;">
                                    <t t-esc="'%.2f' % (main_total_qty or 0.0)"/>
                                </td>
                                <td style="text-align:center;">&#160;</td>
                                <td style="text-align:center;">&#160;</td>
                                <td>&#160;</td>
                            </tr>
                        </tbody>
                    </table>

                    <table style="width:100%; margin-top:24px; border-collapse:collapse;">
                        <tr>
                            <td style="width:45%; text-align:center; border-top:1px solid #000; padding-top:6px;">
                                Responsable L/P
                            </td>
                            <td style="width:10%;">&#160;</td>
                            <td style="width:45%; text-align:center; border-top:1px solid #000; padding-top:6px;">
                                Responsable Bodega
                            </td>
                        </tr>
                    </table>

                    <div style="margin-top:18px; font-weight:bold; text-align:center;">RECICLOS</div>
                    <table class="ref-prod-table" style="margin-top:4px;">
                        <thead>
                            <tr>
                                <th style="width:9%;">CODIGO</th>
                                <th style="width:51%;">DESCRIPCION</th>
                                <th style="width:10%; text-align:center;">CANT.</th>
                                <th style="width:10%; text-align:center;">CANT. REAL</th>
                                <th style="width:10%; text-align:center;">CANT. REAL</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr t-foreach="recycle_rows" t-as="_r">
                                <td>&#160;</td>
                                <td>&#160;</td>
                                <td>&#160;</td>
                                <td>&#160;</td>
                                <td>&#160;</td>
                            </tr>
                        </tbody>
                    </table>

                    <div style="margin-top:12px; font-weight:bold; text-align:center;">ROTO PREVACIADO</div>
                    <table class="ref-prod-table" style="margin-top:4px;">
                        <thead>
                            <tr>
                                <th style="width:9%;">CODIGO</th>
                                <th style="width:51%;">DESCRIPCION</th>
                                <th style="width:10%; text-align:center;">CANT.</th>
                                <th style="width:10%; text-align:center;">CANT. REAL</th>
                                <th style="width:10%; text-align:center;">CANT. REAL</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr t-foreach="roto_rows" t-as="_r">
                                <td>&#160;</td>
                                <td>&#160;</td>
                                <td>&#160;</td>
                                <td>&#160;</td>
                                <td>&#160;</td>
                            </tr>
                        </tbody>
                    </table>

                    <div style="margin-top:8mm; text-align:right; font-size:12px; font-weight:bold;">
                        RPRO 04/15
                    </div>
                </div>
            </t>
        </template>
    </data>
</odoo>
